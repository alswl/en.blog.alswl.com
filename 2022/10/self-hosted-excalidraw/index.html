<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Self hosted online collaborative drawing platform Excalidraw | Log4D</title>
<meta name="keywords" content="excalidraw, tool, diagram, frontend">
<meta name="description" content="First of all, I&rsquo;d like to thank my in-laws for taking the baby for summer vacation, so I can have a weekend to develop this system.
Also thanks to my wife, I did my own thing for two days during the weekend and didn&rsquo;t criticize me.
Lastly, I would like to thank the company for the team building, providing a hotel to stay and spending a night to fix the Chinese handwriting.">
<meta name="author" content="alswl">
<link rel="canonical" href="https://en.blog.alswl.com/2022/10/self-hosted-excalidraw/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.1358339a9e54a395efcc4d8a05eb0ab354bd48c92d39ff71d33f2c2a9c66ea2d.css" integrity="sha256-E1gzmp5Uo5XvzE2KBesKs1S9SMktOf9x0z8sKpxm6i0=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js" integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG&#43;9vmJ0cTS&#43;ovo0FeA="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://en.blog.alswl.com/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://en.blog.alswl.com/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://en.blog.alswl.com/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://en.blog.alswl.com/apple-touch-icon.png">
<link rel="mask-icon" href="https://en.blog.alswl.com/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-QLEQ62FMM1"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-QLEQ62FMM1', { 'anonymize_ip': false });
}
</script>
<meta property="og:title" content="Self hosted online collaborative drawing platform Excalidraw" />
<meta property="og:description" content="First of all, I&rsquo;d like to thank my in-laws for taking the baby for summer vacation, so I can have a weekend to develop this system.
Also thanks to my wife, I did my own thing for two days during the weekend and didn&rsquo;t criticize me.
Lastly, I would like to thank the company for the team building, providing a hotel to stay and spending a night to fix the Chinese handwriting." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://en.blog.alswl.com/2022/10/self-hosted-excalidraw/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-10-17T00:08:31+08:00" />
<meta property="article:modified_time" content="2022-10-17T00:08:31+08:00" /><meta property="og:site_name" content="Log4D" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Self hosted online collaborative drawing platform Excalidraw"/>
<meta name="twitter:description" content="First of all, I&rsquo;d like to thank my in-laws for taking the baby for summer vacation, so I can have a weekend to develop this system.
Also thanks to my wife, I did my own thing for two days during the weekend and didn&rsquo;t criticize me.
Lastly, I would like to thank the company for the team building, providing a hotel to stay and spending a night to fix the Chinese handwriting."/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Posts",
      "item": "https://en.blog.alswl.com/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  3 ,
      "name": "Self hosted online collaborative drawing platform Excalidraw",
      "item": "https://en.blog.alswl.com/2022/10/self-hosted-excalidraw/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Self hosted online collaborative drawing platform Excalidraw",
  "name": "Self hosted online collaborative drawing platform Excalidraw",
  "description": "First of all, I\u0026rsquo;d like to thank my in-laws for taking the baby for summer vacation, so I can have a weekend to develop this system.\nAlso thanks to my wife, I did my own thing for two days during the weekend and didn\u0026rsquo;t criticize me.\nLastly, I would like to thank the company for the team building, providing a hotel to stay and spending a night to fix the Chinese handwriting.",
  "keywords": [
    "excalidraw", "tool", "diagram", "frontend"
  ],
  "articleBody": " First of all, I’d like to thank my in-laws for taking the baby for summer vacation, so I can have a weekend to develop this system.\nAlso thanks to my wife, I did my own thing for two days during the weekend and didn’t criticize me.\nLastly, I would like to thank the company for the team building, providing a hotel to stay and spending a night to fix the Chinese handwriting.\nNote: This is the open source version of Excalidraw, thanks to the community\n#1 Excalidraw Introduce Excalidraw, product features\nWhat is Excalidraw, it’s (probably) the most powerful online collaborative drawing tool, you can try it by visiting Excalidraw.\nIf you did not want get a blank diagram, then you can also visit this public panel Excalidraw to join in the creation.\nExcalidraw works very well, I summarize a few points.\nHand Writing style (Hand Writing) to avoid OCD, what a pixel difference, are gone lie flat in the end No delay in online collaboration, ideal for communication and collaboration in the post-epidemic era The design of the product is excellent: shortcuts, object connection sticking, selected files directly to the local storage and other details are there After this product was promoted internally by our internal partners, we quickly fell in love with it and put a lot of diagrams on Excalidraw, but it also led to a new problem.\nPublic SaaS services have data security risks What to do? I'm going to self hosted it! #2 Before deploying, let’s understand how Excalidraw works How Excalidraw works and how self hosted works：\nSo what is the core difficulty of self hosted.\nSolving the excalidraw-storage data storage problem, aka. replacing the Google Cloud Platform’s firebase service.\n#3 Self hosted PoC If things don’t work out, ask yourself\n- Mencius\nIt is better to seek from Github than to seek from yourself.\n- alswl\nLet’s start by looking at Excalidraw’s storage system. Firebase is Google’s Serverless service, formerly an independent company (and quite popular), but later acquired by GCP.\nI started with the idea of replacing Firebase and found a community service Supabase (found a free SaaS service, amazing)\nHowever, after careful research, I found that Supabase’s API is not compatible with firebase and cannot be simply replaced with .\nExcalidraw also relies on Excalidraw+ to provide a paid service. Is there a simple and viable solution from the community? I found a bit of a solution within the community:\nSelf hosting Excalidraw - Umbrella issue · Issue #1772 · excalidraw/excalidraw Collaboration mode - Self-hosting vs Collab on top of · Discussion #3879 · excalidraw/excalidraw (github.com) They gave a way (although it was later proven that there was still a crooked way).\nKilian Decaderincourt / Excalidraw Fork · GitLab forked excalidraw Kilian Decaderincourt / excalidraw-storage-backend · GitLab So I started reviewing their solution, opened the code and saw that I had the right idea (replacing several interfaces of firebase), using my own KV storage (Redis / MySQL / Mongo) to replace it.\nAttempted deployment and immediately ran into problems with:\nDockerfile build failed Versions too far behind upstream (2020 -\u003e 2022) Merged with Rebase Unable to follow Upstream What a coincidence that I’m Frontend Intern // Community Patching Specialist // Kubernetes Cleaner // YAML Senior Specialist , specializing in these few things.\n#4 Let’s do it alswl/excalidraw-storage-backend: Excalidraw Backend build with Dockerfile in two stages https://github.com/alswl/excalidraw-storage-backend/commit/d841d734ab02659df370a6bdef3f1d8947696580](https://github.com/alswl/excalidraw-storage-backend/commit/d841d734ab02659df370a6bdef3f1d8947696580) using Chinese mirror feat: china mirror · alswl/excalidraw-storage-backend@30a6da9 alswl/excalidraw: Virtual whiteboard for sketching hand-drawn like diagrams fix, using http stroage instead of firebase Feat/self host backend by alswl · Pull Request #2 · alswl/excalidraw Modification code architecture #5 Future(or not) Excalidraw is a free version of the SaaS service, Excalidraw+ is a paid version , what’s the difference?\nTo sum up.\nMore reliable storage, integrated to cloud storage (e.g. iCloud / NAS) User identification, connected to a common identity system More personalized permissions control (password access, targeted sharing), tenant control, project group control Library shared within the domain Integration with other systems (Yuque, Dingtalk Documents, Lark, etc.) Or, just buy Excalidraw enterprise version!!! Less works, more enjoy.\n#6 Chinese handwriting optimization One problem is that Chinese fonts are not handwritten , which is very incongruous. Let’s see which fonts work first.\nChinese handwriting fonts supported by macOS:\nhttps://support.apple.com/zh-cn/HT212587 macOS Monterey 附带的字体 - 官方 Apple 支持 (中国) cursive family:\nPanziPen LingWai Hannotate Windows Chinese support for handwriting is poor, you have to install Office to have more options: 华文行楷; 方正舒体 (release in Office)\nhttps://www.zhihu.com/question/22703287 Windows 系统内置的中文字体为什么只有那几种？不多内置几种字体呢？ - 知乎 (zhihu.com) https://zh.m.wikipedia.org/zh-hans/Microsoft_Windows字型列表 If not, only the system’s own italic KaiTi will work.\nFinally, relying on my poor front-end level, I made a PoC and submitted a PR to the official: [feat: simple impl of multi font support, for chinese font by alswl - Pull Request #5604 - excalidraw/excalidraw] (https://github.com/excalidraw/excalidraw/pull/5604)\nHere is the final result.\nUpdate 2022-12 A few users came to me to ask how to deploy it. So based on the above solution, I provided a set of one-click pull-up services based on Docker Compose: with collaboration, Chinese font support. See alswl/excalidraw-collaboration.\n",
  "wordCount" : "845",
  "inLanguage": "en",
  "datePublished": "2022-10-17T00:08:31+08:00",
  "dateModified": "2022-10-17T00:08:31+08:00",
  "author":{
    "@type": "Person",
    "name": "alswl"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://en.blog.alswl.com/2022/10/self-hosted-excalidraw/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Log4D",
    "logo": {
      "@type": "ImageObject",
      "url": "https://en.blog.alswl.com/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://en.blog.alswl.com" accesskey="h" title="Log4D (Alt + H)">Log4D</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://blog.alswl.com/" title="中文博客">
                    <span>中文博客</span>&nbsp;
                    <svg fill="none" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round"
                        stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12">
                        <path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"></path>
                        <path d="M15 3h6v6"></path>
                        <path d="M10 14L21 3"></path>
                    </svg>
                </a>
            </li>
            <li>
                <a href="https://en.blog.alswl.com/categories/" title="Categories">
                    <span>Categories</span>
                </a>
            </li>
            <li>
                <a href="https://en.blog.alswl.com/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
            <li>
                <a href="https://en.blog.alswl.com/archives/" title="Archives">
                    <span>Archives</span>
                </a>
            </li>
            <li>
                <a href="https://en.blog.alswl.com/about/" title="About">
                    <span>About</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://en.blog.alswl.com">Home</a>&nbsp;»&nbsp;<a href="https://en.blog.alswl.com/posts/">Posts</a></div>
    <h1 class="post-title">
      Self hosted online collaborative drawing platform Excalidraw
    </h1>
    <div class="post-meta"><span title='2022-10-17 00:08:31 +0800 +0800'>2022-10-17</span>&nbsp;·&nbsp;alswl

</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><nav id="TableOfContents">
  <ul>
    <li><a href="#1-excalidraw">#1 Excalidraw</a></li>
    <li><a href="#2-before-deploying-lets-understand-how-excalidraw-works">#2 Before deploying, let&rsquo;s understand how Excalidraw works</a></li>
    <li><a href="#3-self-hosted-poc">#3 Self hosted PoC</a></li>
    <li><a href="#4-lets-do-it">#4 Let&rsquo;s do it</a></li>
    <li><a href="#5-futureor-not">#5 Future(or not)</a></li>
    <li><a href="#6-chinese-handwriting-optimization">#6 Chinese handwriting optimization</a></li>
    <li><a href="#update-2022-12">Update 2022-12</a></li>
  </ul>
</nav>
        </div>
    </details>
</div>

  <div class="post-content"><blockquote>
<p>First of all, I&rsquo;d like to thank my in-laws for taking the baby for summer vacation, so I can have a weekend to develop this system.</p>
<p>Also thanks to my wife, I did my own thing for two days during the weekend and didn&rsquo;t criticize me.</p>
<p>Lastly, I would like to thank the company for the team building, providing a hotel to stay and spending a night to fix the Chinese handwriting.</p>
<p>Note: This is the open source version of Excalidraw, thanks to the community</p>
</blockquote>
<h2 id="1-excalidraw">#1 Excalidraw<a hidden class="anchor" aria-hidden="true" href="#1-excalidraw">#</a></h2>
<blockquote>
<p>Introduce Excalidraw, product features</p>
</blockquote>
<p>What is Excalidraw, <mark>it&rsquo;s (probably) the most powerful online collaborative drawing tool</mark>, you can try it by visiting <a href="https://excalidraw.com/">Excalidraw</a>.</p>
<p>




<img loading="lazy" src="/images/202210/anatomy_of_an_azure_function.png" alt="anatomy_of_an_azure_function.png"  />


</p>
<p>If you did not want get a blank diagram, then you can also visit this public panel <a href="https://excalidraw.com/#room=e630a562422e6e9d94db,IXndkz3JfOSGrlswJRC83Q">Excalidraw</a> to join in the creation.</p>
<p>




<img loading="lazy" src="/images/202210/excalidraw-share-room.png" alt="excalidraw-share-room.png"  />


</p>
<p>Excalidraw works very well, I summarize a few points.</p>
<ul>
<li>Hand Writing style (Hand Writing) to avoid OCD, what a pixel difference, are gone lie flat in the end</li>
<li>No delay in online collaboration, ideal for communication and collaboration in the post-epidemic era</li>
<li>The design of the product is excellent: shortcuts, object connection sticking, selected files directly to the local storage and other details are there</li>
</ul>
<p>




<img loading="lazy" src="/images/202210/excalidraw-homepage.png" alt="excalidraw-homepage.png"  />


</p>
<p>After this product was promoted internally by our internal partners, we quickly fell in love with it and put a lot of diagrams on Excalidraw, but it also led to a new problem.</p>
<center><mark><b>Public SaaS services have data security risks</b></mark></center>
<center><mark><b> What to do? I'm going to self hosted it!</b></mark></center>
<h2 id="2-before-deploying-lets-understand-how-excalidraw-works">#2 Before deploying, let&rsquo;s understand how Excalidraw works<a hidden class="anchor" aria-hidden="true" href="#2-before-deploying-lets-understand-how-excalidraw-works">#</a></h2>
<p><strong>How Excalidraw works and how self hosted works</strong>：</p>
<p>




<img loading="lazy" src="/images/202210/excalidraw-arch.png" alt="excalidraw-arch.png"  />


</p>
<p>So what is the core difficulty of self hosted.</p>
<p>Solving the excalidraw-storage data storage problem, aka. replacing the Google Cloud Platform&rsquo;s firebase service.</p>
<h2 id="3-self-hosted-poc">#3 Self hosted PoC<a hidden class="anchor" aria-hidden="true" href="#3-self-hosted-poc">#</a></h2>
<blockquote>
<p>If things don&rsquo;t work out, ask yourself</p>
<p>- Mencius</p>
<p>It is better to seek from Github than to seek from yourself.</p>
<p>- alswl</p>
</blockquote>
<p>Let&rsquo;s start by looking at Excalidraw&rsquo;s storage system.
Firebase is Google&rsquo;s Serverless service, formerly an independent company (and quite popular), but later acquired by GCP.</p>
<p>




<img loading="lazy" src="/images/202210/firebase.png" alt="firebase.png"  />


</p>
<p>




<img loading="lazy" src="/images/202210/firebase-features.png" alt="firebase-features.png"  />


</p>
<p>I started with the idea of replacing Firebase and found a community service <a href="https://supabase.com/">Supabase</a> (found a free SaaS service, amazing)</p>
<p>




<img loading="lazy" src="/images/202210/supabase.png" alt="supabase.png"  />


</p>
<p>However, after careful research, I found that Supabase&rsquo;s API is not compatible with firebase and <mark> cannot be simply replaced with </mark>.</p>
<p>Excalidraw also relies on Excalidraw+ to provide a paid service. Is there a simple and viable solution from the community? I found a bit of a solution within the community:</p>
<ul>
<li><a href="https://github.com/excalidraw/excalidraw/issues/1772">Self hosting Excalidraw - Umbrella issue · Issue #1772 · excalidraw/excalidraw</a></li>
<li><a href="https://github.com/excalidraw/excalidraw/discussions/3879">Collaboration mode - Self-hosting vs Collab on top of · Discussion #3879 · excalidraw/excalidraw (github.com)</a></li>
</ul>
<p>They gave a way (although it was later proven that there was still a crooked way).</p>
<ul>
<li><a href="https://gitlab.com/kiliandeca/excalidraw-fork">Kilian Decaderincourt / Excalidraw Fork · GitLab</a> forked excalidraw</li>
<li><a href="https://gitlab.com/kiliandeca/excalidraw-storage-backend">Kilian Decaderincourt / excalidraw-storage-backend · GitLab</a></li>
</ul>
<p>So I started reviewing their solution, opened the code and saw that I had the right idea (replacing several interfaces of firebase), using my own KV storage (Redis / MySQL / Mongo) to replace it.</p>
<p>




<img loading="lazy" src="/images/202210/jing-shen.png" alt="jing-shen.png"  />


</p>
<p>Attempted deployment and immediately ran into problems with:</p>
<center><mark><b> Dockerfile build failed </b></mark></center>
<center><mark><b> Versions too far behind upstream (2020 -> 2022)</b></mark></center>
<center><mark><b> Merged with Rebase Unable to follow Upstream</b></mark></center>
<p>What a coincidence that I&rsquo;m <mark><b>Frontend Intern // Community Patching Specialist // Kubernetes Cleaner // YAML Senior Specialist </b></mark>, specializing in these few things.</p>
<h2 id="4-lets-do-it">#4 Let&rsquo;s do it<a hidden class="anchor" aria-hidden="true" href="#4-lets-do-it">#</a></h2>
<ul>
<li><a href="https://github.com/alswl/excalidraw-storage-backend">alswl/excalidraw-storage-backend: Excalidraw Backend</a>
<ul>
<li>build with Dockerfile in two stages <a href="https://github.com/alswl/excalidraw-storage-backend/commit/d841d734ab02659df370a6bdef3f1d8947696580%5D(https://github.com/alswl/excalidraw-storage-backend/commit/d841d734ab02659df370a6bdef3f1d8947696580)">https://github.com/alswl/excalidraw-storage-backend/commit/d841d734ab02659df370a6bdef3f1d8947696580](https://github.com/alswl/excalidraw-storage-backend/commit/d841d734ab02659df370a6bdef3f1d8947696580)</a></li>
<li>using Chinese mirror <a href="https://github.com/alswl/excalidraw-storage-backend/commit/30a6da9c87b367bb1fbde449f754923638545fa8">feat: china mirror · alswl/excalidraw-storage-backend@30a6da9</a></li>
</ul>
</li>
<li><a href="https://github.com/alswl/excalidraw">alswl/excalidraw: Virtual whiteboard for sketching hand-drawn like diagrams</a>
<ul>
<li>fix, using http stroage instead of firebase</li>
<li><a href="https://github.com/alswl/excalidraw/pull/2">Feat/self host backend by alswl · Pull Request #2 · alswl/excalidraw</a></li>
</ul>
</li>
</ul>
<center><mark><b> Modification code architecture </b></mark></center>
<p>




<img loading="lazy" src="/images/202210/self-hosted-excalidraw.png" alt="self-hosted-excalidraw.png"  />


</p>
<h2 id="5-futureor-not">#5 Future(or not)<a hidden class="anchor" aria-hidden="true" href="#5-futureor-not">#</a></h2>
<p>Excalidraw is a free version of the SaaS service, <mark><b>Excalidraw+ is a paid version </b></mark>, what&rsquo;s the difference?</p>
<p>




<img loading="lazy" src="/images/202210/excalidraw-price.png" alt="excalidraw-price.png"  />


</p>
<p>To sum up.</p>
<ul>
<li>More reliable storage, integrated to cloud storage (e.g. iCloud / NAS)</li>
<li>User identification, connected to a common identity system</li>
<li>More personalized permissions control (password access, targeted sharing), tenant control, project group control</li>
<li>Library shared within the domain</li>
<li>Integration with other systems (Yuque, Dingtalk Documents, Lark, etc.)</li>
</ul>
<p>Or, just <mark><b>buy Excalidraw enterprise</b></mark> version!!! Less works, more enjoy.</p>
<h2 id="6-chinese-handwriting-optimization">#6 Chinese handwriting optimization<a hidden class="anchor" aria-hidden="true" href="#6-chinese-handwriting-optimization">#</a></h2>
<p>One problem is that <mark><b> Chinese fonts are not handwritten </b></mark>, which is very incongruous. Let&rsquo;s see which fonts work first.</p>
<p>Chinese handwriting fonts supported by macOS:</p>
<ul>
<li><a href="https://support.apple.com/zh-cn/HT212587">https://support.apple.com/zh-cn/HT212587</a></li>
<li><a href="https://support.apple.com/zh-cn/HT212587">macOS Monterey 附带的字体 - 官方 Apple 支持 (中国)</a></li>
</ul>
<p>cursive family:</p>
<ul>
<li>PanziPen</li>
<li>LingWai</li>
<li>Hannotate</li>
</ul>
<p>




<img loading="lazy" src="/images/202210/hanzipen-sc.png" alt="hanzipen-sc.png"  />


</p>
<p>Windows Chinese support for handwriting is poor, you have to install Office to have more options: 华文行楷; 方正舒体 (release in Office)</p>
<ul>
<li><a href="https://www.zhihu.com/question/22703287">https://www.zhihu.com/question/22703287</a></li>
<li><a href="https://www.zhihu.com/question/22703287">Windows 系统内置的中文字体为什么只有那几种？不多内置几种字体呢？ - 知乎 (zhihu.com)</a></li>
<li><a href="https://zh.m.wikipedia.org/zh-hans/Microsoft_Windows%E5%AD%97%E5%9E%8B%E5%88%97%E8%A1%A8">https://zh.m.wikipedia.org/zh-hans/Microsoft_Windows字型列表</a></li>
</ul>
<p>If not, only the system&rsquo;s own italic KaiTi will work.</p>
<p>Finally, relying on my poor front-end level, I made a PoC and submitted a PR to the official: [feat: simple impl of multi font support, for chinese font by alswl - Pull Request #5604 - excalidraw/excalidraw] (<a href="https://github.com/excalidraw/excalidraw/pull/5604">https://github.com/excalidraw/excalidraw/pull/5604</a>)</p>
<p>Here is the final result.</p>
<p>




<img loading="lazy" src="/images/202210/chinese-hand-writing.png" alt="chinese-hand-writing.png"  />


</p>
<hr />
<h2 id="update-2022-12">Update 2022-12<a hidden class="anchor" aria-hidden="true" href="#update-2022-12">#</a></h2>
<p>A few users came to me to ask how to deploy it.
So based on the above solution, I provided a set of one-click pull-up services based on Docker Compose: with collaboration, Chinese font support.
See <a href="https://github.com/alswl/excalidraw-collaboration">alswl/excalidraw-collaboration</a>.</p>

<hr />
<p>原文链接: <a href="https://en.blog.alswl.com/2022/10/self-hosted-excalidraw/">Self hosted online collaborative drawing platform Excalidraw | Log4D</a></p>
<p>3a1ff193cee606bd1e2ea554a16353ee</p>
<p>欢迎关注我的微信公众号：<a
href="http://mp.weixin.qq.com/mp/getmasssendmsg?__biz=MzIyNTIwMTU3MQ==#wechat_webview_type=1&amp;wechat_redirect">窥豹</a></p>
<figure>
<img
src="https://d05fae.dijingchao.com/upload_dropbox/201605/qrcode_for_gh_17e2f9c2caa4_258.jpg"
alt="窥豹" />
<figcaption aria-hidden="true">窥豹</figcaption>
</figure>

    
  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://en.blog.alswl.com/tags/excalidraw/">excalidraw</a></li>
      <li><a href="https://en.blog.alswl.com/tags/tool/">tool</a></li>
      <li><a href="https://en.blog.alswl.com/tags/diagram/">diagram</a></li>
      <li><a href="https://en.blog.alswl.com/tags/frontend/">frontend</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="https://en.blog.alswl.com/2022/10/fix-keyboard/">
    <span class="title">« Prev</span>
    <br>
    <span>How to fix keyboard - from coding to electronics factory worker</span>
  </a>
  <a class="next" href="https://en.blog.alswl.com/2020/06/type-safe-python/">
    <span class="title">Next »</span>
    <br>
    <span>Type system in Python</span>
  </a>
</nav>

  </footer><script src="https://utteranc.es/client.js"
        repo="alswl/en.blog.alswl.com"
        issue-term="pathname"
        theme="preferred-color-scheme"
        crossorigin="anonymous"
        async>
</script>

</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2023 <a href="https://en.blog.alswl.com">Log4D</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
